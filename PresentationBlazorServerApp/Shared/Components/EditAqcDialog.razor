@using MudBlazor.Dialog
@inject ISnackbar Snackbar

<MudDialog Style="width: 100%; height:25%">
    <TitleContent>
        <MudText Typo="Typo.h6">
            <MudIcon Icon="@Icons.Material.Filled.Edit" Class="mr-3" />
            AQC Form 682: Close @request?.RequestTicketId
        </MudText>
    </TitleContent>
    <DialogContent>
        <!-- Display request properties for editing -->
        @if (request != null)
        {
            <p>@request.RequestTitle</p>

            <p>I confirm that this task has been completed to a satisfactory standard and the area is safe.</p>
            <!-- Add other properties as needed -->
        }
    </DialogContent>
    <DialogActions>
        <MudButton Variant="MudBlazor.Variant.Filled" OnClick="Cancel">Cancel</MudButton>
        <MudButton Variant="MudBlazor.Variant.Filled" Color="Color.Error" OnClick="UpdateEquipment">Confirm</MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter] MudDialogInstance? MudDialog { get; set; }

    [Parameter] public Request? request { get; set; }

        [CascadingParameter]
    public IEmployeeDataService? EmployeeDataService { get; set; }

    // private async Task UpdateEquipment()
    private void UpdateEquipment()
    {
        if (request != null)
        {
            //Console.WriteLine("Aqc Form: " + request.RequestTicketId + " Completed by " + EmployeeDataService?.Employeeid);
            // Perform update logic here
        }

        MudDialog?.Close(DialogResult.Ok(request?.RequestId));
    }

    private void Cancel()
    {
        MudDialog?.Cancel();
    }
}
